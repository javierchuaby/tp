@startuml
!include style.puml
skinparam arrowThickness 1.1
skinparam arrowColor LOGIC_COLOR_T4
skinparam classBackgroundColor LOGIC_COLOR

title ClubTrack â€” Logic Component

package Logic as LogicPackage {

  package "Parser" as ParserPkg {
    class "<<interface>>\nParser<T>" as IParser
    class ClubTrackParser
    class XYZCommandParser

    class ArgumentTokenizer
    class ArgumentMultimap
    class Prefix
    class CliSyntax
    class ParserUtil
  }

  package "Commands" as CmdPkg {
    class CommandResult
    abstract class Command
    class XYZCommand

    package "exceptions" {
      class CommandException
      class ParseException
    }
  }

  class "<<interface>>\nLogic" as Logic
  class LogicManager
  class ClubTrackListManager
  class Messages
}

package Model {
  interface Model
}

'===========================
'  Component relationships
'===========================

LogicManager .right.|> Logic
LogicManager --> Model
LogicManager --> ClubTrackParser
LogicManager --> ClubTrackListManager
LogicManager ..> Messages

Logic ..> CommandResult
LogicManager ..> CommandResult : returns

LogicManager .down.> Command : executes()
XYZCommand -up-|> Command
CmdPkg.Command ..> Model : reads/writes

'===========================
'  Parser relationships
'===========================

IParser <|.. XYZCommandParser
ClubTrackParser ..> XYZCommandParser : delegates
ParserUtil ..> Prefix
ParserUtil ..> CliSyntax
XYZCommandParser ..> ArgumentTokenizer
ArgumentTokenizer --> ArgumentMultimap
ArgumentMultimap ..> Prefix
CliSyntax ..> Prefix

' Parser creates concrete command instances (abstracted as XYZCommand)
XYZCommandParser ..> XYZCommand : <<create>>

'===========================
'  Notes
'===========================

note right of XYZCommand
  Represents all concrete commands in ClubTrack, e.g.:
  - AddCommand / EditCommand / DeleteCommand
  - FindCommand, SearchCommand (n/, t/, any/)
  - TagCommand / UntagCommand
  - MarkCommand / UnmarkCommand
  - AttendanceCommand
  - SwitchCommand (active list)
  - AddPointsCommand / MinusPointsCommand / PointsCommand
  - ListCommand / RemoveCommand / HelpCommand / ExitCommand / ClearCommand
end note

note bottom of ClubTrackListManager
  Used by Switch-related command(s) to change the active list.
end note

@enduml